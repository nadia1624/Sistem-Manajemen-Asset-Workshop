<%- include("../../layout/sidebar.ejs") %>


<main class="content">
    <div class="header-content">
        <h3 style="font-weight: bold;">Pengelolaan Aset</h3>
        <div class="button-tambah">
            <button>
                <i class="fas fa-plus"></i> Tambah
            </button>
        </div>
    </div>
    <div class="container-fluid px-4">
      <!-- Container utama untuk tabel -->
      <div class="table-wrapper">
          <div class="table-responsive">
              <table class="table-compact">
                  <thead>
                      <tr>
                          <th width="5%">No</th>
                          <th width="20%">Kategori</th>
                          <th width="20%">Jumlah Aset</th>
                          <th width="30%">Kondisi Aset</th>
                          <th width="25%">Aksi</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr>
                          <td>1</td>
                          <td>Lorem Ipsum</td>
                          <td>Lorem Ipsum</td>
                          <td>Lorem Ipsum</td>
                          <td>
                                <button class="button-delete">
                                <i class="fa-solid fa-trash"></i>
                                </button>
                              <button class="button-edit">
                                  <i class="fa-regular fa-pen-to-square"></i>
                              </button>
                              <a href="/admin/list-aset">
                                <button class="button-arrow">
                                    <i class="fa-solid fa-arrow-right"></i>
                                </button>
                              </a>
                          </td>
                      </tr>
                  </tbody>
              </table>
          </div>
      </div>
  </div>
</main>

<!-- Modal untuk Edit Kategori -->
<div id="addModal" class="popup-modal">
    <div class="modal-content">
        <span class="close-btn" id="closeAddBtn">&times;</span>
        <h3>Tambah Data Kategori</h3>
        <form id="addForm">
            <label for="addNamaKategori" class="left-label">Nama Kategori</label>
            <input type="text" id="addNamaKategori" name="namaKategori" placeholder="Masukkan nama kategori" required>
            <button type="submit" class="btn finish-btn">Simpan</button>
        </form>
    </div>
  </div>

<!-- Modal untuk Edit Kategori -->
<div id="editModal" class="popup-modal">
  <div class="modal-content">
      <span class="close-btn" id="closeEditBtn">&times;</span>
      <h3>Edit Data Kategori</h3>
      <form id="editForm">
          <label for="editNamaKategori" class="left-label">Nama Kategori</label>
          <input type="text" id="editNamaKategori" name="namaKategori" placeholder="Masukkan nama kategori" required>
          <button type="submit" class="btn finish-btn">Simpan</button>
      </form>
  </div>
</div>

<div id="deleteModal" class="popup-modal">
    <div class="modal-content">
        <span class="close-btn" id="closeDeleteModal">&times;</span>
        <h3>Konfirmasi Hapus Data</h3>
        <p>Apakah kamu yakin ingin menghapus data [kategori] ini?</p>
        <div class="flex justify-center space-x-4">
            <button type="button" class="btn cancel-btn">Tidak</button>
            <button type="button" style="background-color: #B60017; color: #fff;" class="btn finish-btn">Ya</button>
        </div>
    </div>
</div>


<script>
  // Mendapatkan elemen modal dan tombol
  const addModal = document.getElementById("addModal");
  const editModal = document.getElementById("editModal");
  const closeAddBtn = document.getElementById("closeAddBtn");
  const closeEditBtn = document.getElementById("closeEditBtn");
  const addCategoryButton = document.querySelector('.button-tambah');
  const editButtons = document.querySelectorAll('.button-edit');
  const deleteButtons = document.querySelectorAll('.button-delete');

  // Menangani klik pada tombol "Tambah Kategori"
  addCategoryButton.addEventListener('click', function(event) {
      event.preventDefault();
      addModal.style.display = 'flex';
  });

  // Menangani klik pada tombol edit
  editButtons.forEach(button => {
      button.addEventListener('click', function(event) {
          event.preventDefault();
          const row = this.closest('tr');
          const kategoriName = row.querySelector('[data-kategori]')?.textContent || '';
          document.getElementById('editNamaKategori').value = kategoriName;
          editModal.style.display = 'flex';
      });
  });

  // Menangani klik pada tombol tutup untuk kedua modal
  closeAddBtn.addEventListener('click', function() {
      addModal.style.display = 'none';
  });

  closeEditBtn.addEventListener('click', function() {
      editModal.style.display = 'none';
  });

  // Menangani klik di luar modal untuk menutupnya
  window.addEventListener('click', function(event) {
      if (event.target == addModal) {
          addModal.style.display = 'none';
      }
      if (event.target == editModal) {
          editModal.style.display = 'none';
      }
  });

  // === Modal untuk Konfirmasi Hapus Data ===
  const deleteModal = document.getElementById("deleteModal");
    const cancelDeleteBtn = deleteModal.querySelector('.cancel-btn');
    const confirmDeleteBtn = deleteModal.querySelector('.finish-btn');
    const closeDeleteBtn = document.getElementById("closeDeleteModal");

    deleteButtons.forEach(button => {
        button.addEventListener('click', function(event) {
            event.preventDefault(); // Mencegah aksi default
            deleteModal.style.display = 'flex'; // Menampilkan modal hapus
        });
    });

    closeDeleteBtn.addEventListener('click', function() {
        deleteModal.style.display = 'none'; // Menyembunyikan modal
    });

    cancelDeleteBtn.addEventListener('click', function() {
        deleteModal.style.display = 'none'; // Menyembunyikan modal
    });

    confirmDeleteBtn.addEventListener('click', function() {
        deleteModal.style.display = 'none'; // Menyembunyikan modal
        alert("Data berhasil dihapus!"); // Ganti dengan logika hapus data
    });

    window.onclick = function(event) {
        if (event.target == deleteModal) {
            deleteModal.style.display = 'none'; // Menyembunyikan modal saat klik di luar modal
        }
    };

  // Form submit handlers
  document.getElementById('addForm').addEventListener('submit', function(event) {
      event.preventDefault();
      const newKategoriName = document.getElementById('addNamaKategori').value;
      // Tambahkan logika untuk menyimpan kategori baru
      addModal.style.display = 'none';
  });

  document.getElementById('editForm').addEventListener('submit', function(event) {
      event.preventDefault();
      const updatedKategoriName = document.getElementById('editNamaKategori').value;
      // Tambahkan logika untuk mengupdate kategori
      editModal.style.display = 'none';
  });

  
</script>

</body>
</html>
