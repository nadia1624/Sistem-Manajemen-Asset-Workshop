<body>
  <% const currentPath = req.path; %>
  <%- include('../../layout/header.ejs', { currentPath: currentPath }) %>

  <!-- Card Grid -->
  <div class="max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 mx-auto">
    <div id="cardContainer" class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
      <!-- Cards will be inserted here by JavaScript -->
    </div>
  </div>

  <!-- Modal -->
  <div id="addModal" class="modal">
    <div class="modal-content">
      <span id="close" class="close-btn">&times;</span>
      <h3 id="modalTitle"></h3>
      <p id="modalContent">Apakah Anda yakin ingin membuat permintaan untuk aset ini?</p>
      <div class="modal-actions">
        <button type="button" class="btn cancel-btn">
          Tidak
        </button>
        <button type="submit" class="btn finish-btn">
          Ya
        </button>
      </div>
    </div>
  </div>
  

  <script>

     const dummyData = [
        {
          id: 1,
          title: "[Jenis Barang 1]",
          description: "Description for Asset 1",
          image: "/api/placeholder/400/300",
        },
        {
          id: 2,
          title: "[Jenis Barang 2]",
          description: "Description for Asset 2",
          image: "/api/placeholder/400/300",
        },
        {
          id: 3,
          title: "[Jenis Barang 3]",
          description: "Description for Asset 3",
          image: "/api/placeholder/400/300",
        },
        {
          id: 4,
          title: "[Jenis Barang 4]",
          description: "Description for Asset 4",
          image: "/api/placeholder/400/300",
        },
        {
          id: 5,
          title: "[Jenis Barang 5]",
          description: "Description for Asset 5",
          image: "/api/placeholder/400/300",
        },
        {
          id: 6,
          title: "[Jenis Barang 6]",
          description: "Description for Asset 6",
          image: "/api/placeholder/400/300",
        },
        {
          id: 7,
          title: "[Jenis Barang 7]",
          description: "Description for Asset 7",
          image: "/api/placeholder/400/300",
        },
        {
          id: 8,
          title: "[Jenis Barang 8]",
          description: "Description for Asset 8",
          image: "/api/placeholder/400/300",
        },
      ];
      
    
      // Function to create card HTML
      function createCard(item) {
        return `
                <a href="/karyawan/detail-aset" class="group flex flex-col h-full bg-white border-2 border-grey shadow-sm rounded-xl hover:border-black hover:shadow-md transition duration-300">
            <div class="h-52 flex flex-col justify-center items-center bg-gray-100 rounded-t-xl">
                <img class="w-full h-full object-cover rounded-t-xl" src="${item.image}" alt="${item.title}">
            </div>
            <div class="p-4 md:p-6">
                <h3 class="text-xl font-semibold text-gray-800">
                    ${item.title}
                </h3>
                <p class="mt-2 text-gray-600">
                    ${item.description}
                </p>
            </div>
            <div class="p-4 md:p-6 mt-auto text-right">
                <button type="button" class="inline-flex items-center justify-center w-8 h-8 text-sm font-semibold rounded-lg bg-red-600 text-red-500 hover:bg-red-800 disabled:opacity-50 disabled:pointer-events-none">
                    <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="white">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                </button>
            </div>
        </a>
    `;
      }

      // Function to render all cards
      function renderCards() {
        const container = document.getElementById("cardContainer");
        const cardsHTML = dummyData.map((item) => createCard(item)).join("");
        container.innerHTML = cardsHTML;
      }

      // Render cards when page loads
      document.addEventListener("DOMContentLoaded", renderCards);

      // Simple toggle for mobile menu
      document.addEventListener("DOMContentLoaded", function () {
        const toggleButton = document.querySelector(".hs-collapse-toggle");
        const mobileMenu = document.getElementById("navbar-collapse-mobile");

        toggleButton.addEventListener("click", function () {
          mobileMenu.classList.toggle("hidden");
        });
      });      
      
      
 function showModal(title) {
  const modal = document.getElementById("addModal");
  const modalTitle = document.getElementById("modalTitle");

  modalTitle.textContent = `Permintaan untuk ${title}`;
  modal.style.display = "flex"; // Menyesuaikan dengan class modal baru
}

function hideModal() {
  const modal = document.getElementById("addModal");
  modal.style.display = "none"; // Menyesuaikan dengan class modal baru
}


      // Event listener untuk tombol request pada card
      document.getElementById("cardContainer").addEventListener("click", (event) => {
        const button = event.target.closest(".request-btn");
        if (button) {
          const title = button.getAttribute("data-title");
          showModal(title);
        }



      // Event listener untuk tombol "Tutup" modal
      document.getElementById("close").addEventListener("click", hideModal);

      // Event listener untuk tombol "Tidak" pada modal
      document.querySelector(".cancel-btn").addEventListener("click", hideModal);

      document.querySelector(".finish-btn").addEventListener("click", () => {
        hideModal();
        alert("Permintaan aset telah dibuat!");
        window.location.href = "/karyawan/permintaanAset"; // Ganti dengan URL halaman tujuan
      });

    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/preline@2.0.3/dist/preline.min.js"></script>
</body>
