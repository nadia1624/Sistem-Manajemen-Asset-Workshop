<body>
    <!-- Gunakan currentPath yang sudah dikirim dari route -->
    <%- include('../../layout/header.ejs', { currentPath: currentPath }) %>
    
    <style>
      th:nth-child(2), td:nth-child(2) { width: 15%; }
      th:nth-child(3), td:nth-child(3) { width: 15%; }
      th:nth-child(4), td:nth-child(4) { width: 10%; }
      th:nth-child(5), td:nth-child(5) { width: 20%; }
      th:nth-child(6), td:nth-child(6) { width: 15%; }
      th:nth-child(7), td:nth-child(7) { width: 10%; }
      th:nth-child(8), td:nth-child(8) { width: 10%; }
   
      .btn {
         background-color: #c2ef97;
         color: #000;
         border: none;
         border-radius: 5px;
         padding: 10px;
         cursor: pointer;
         width: 100px; 
         font-weight: bold;
      }

      .btn-action {
    background-color: #ffffff;
    font-size: 18px;
    padding: 10px;
    border: 2px solid #ccc;
    border-radius: 8px;
    color: #000;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .btn-action i {
    font-size: 12px;
    margin: 0 2px;
  }

  td button {
    white-space: nowrap;
    overflow: visible;
    width: auto;
    
  }
      .modal-actions {
         display: flex;
         justify-content: center;
         gap: 10px;
      }
   </style>
   

   <main class="content">
    <div class="container-fluid px-4">
      <div class="table-wrapper">
        <div class="table-responsive">
          <div class="table-bungkus">
        <div class="table-scroll">
            <table class="table-compact">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>Nama Barang</th>
                        <th>Gambar</th>
                        <th>Kategori</th>
                        <th>Deskripsi</th>
                        <th>Ajukan Cek</th>
                        <th>Return Aset</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    <% const dataDummy = [
                        { no: 1, nama: "Laptop Dell XPS", gambar: "https://placehold.co/100x100", kategori: "Elektronik", deskripsi: "Laptop untuk keperluan desain grafis" },
                        { no: 2, nama: "Meja Kerja", gambar: "https://placehold.co/100x100", kategori: "Furniture", deskripsi: "Meja untuk ruang kerja baru" },
                        { no: 3, nama: "Printer Epson", gambar: "https://placehold.co/100x100", kategori: "Elektronik", deskripsi: "Printer untuk keperluan administrasi" },
                        { no: 1, nama: "Laptop Dell XPS", gambar: "https://placehold.co/100x100", kategori: "Elektronik", deskripsi: "Laptop untuk keperluan desain grafis" },
                        { no: 2, nama: "Meja Kerja", gambar: "https://placehold.co/100x100", kategori: "Furniture", deskripsi: "Meja untuk ruang kerja baru" },
                        { no: 3, nama: "Printer Epson", gambar: "https://placehold.co/100x100", kategori: "Elektronik", deskripsi: "Printer untuk keperluan administrasi" },
                    ]; %>

                    <% dataDummy.forEach((item) => { %>
                        <tr>
                            <td><%= item.no %></td>
                            <td><%= item.nama %></td>
                            <td>
                                <img class="img-fluid" alt="Gambar Aset" src="<%= item.gambar %>" />
                            </td>
                            <td><%= item.kategori %></td>
                            <td><%= item.deskripsi %></td>
                            <td>
                                <button class="btn btn-success" onclick="openModal()">
                                    <i class="fa-solid fa-check"></i> Check
                                </button>
                            </td>
                            <td>
                                <button class="btn btn-secondary" style="background-color: #ccc;" onclick="openReturnModal()">
                                    <i class="fa-solid fa-arrow-rotate-left"></i> Return
                                </button>
                            </td>
                            <td>
                                <button class="btn-action">
                                    <i class="fa-solid fa-download" style="font-size: 16px;"></i>
                                </button>
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
          </div>
          </div>
          </div>
        </div>
    </div>
</main>

<!-- Modal -->
<div id="checkModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal()">&times;</span>
    <h3>Ajukan Pengecekan Aset</h3>
    <form>
      <label for="complaint">Keluhan:</label>
      <textarea id="complaint" placeholder="Keluhan yang diajukan"></textarea>
      <button type="button" class="btn" onclick="submitComplaint()" style="margin-top: 20px; float: right;">Simpan</button>
    </form>
  </div>
</div>

<!-- Modal Return -->
<div id="returnModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeReturnModal()">&times;</span>
    <h3>Pengembalian Aset</h3>
    <p>Apakah kamu yakin akan mengembalikan aset <span id="returnAssetName"></span>?</p>
    <div class="modal-actions" style="display: flex; justify-content: center; margin-top: 20px;">
      <button type="button" class="cancel-btn" onclick="closeReturnModal()">Tidak</button>
      <button type="button" class="finish-btn" onclick="confirmReturn()">Ya</button>
    </div>
  </div>
</div>


<script>
  // Open Modal
  function openModal() {
    document.getElementById("checkModal").style.display = "flex";
  }

  // Close Modal
  function closeModal() {
    document.getElementById("checkModal").style.display = "none";
  }

  // Submit Complaint (Placeholder functionality)
  function submitComplaint() {
    const complaintText = document.getElementById("complaint").value;
    if (complaintText.trim() === "") {
      alert("Silakan isi keluhan terlebih dahulu.");
    } else {
      alert("Keluhan berhasil disimpan!");
      closeModal();
    }
  }

  // Modal Return
function openReturnModal() {
    document.getElementById("returnModal").style.display = "flex";
}

function closeReturnModal() {
    document.getElementById("returnModal").style.display = "none";
}

function confirmReturn() {
    // Tampilkan pesan sukses
    alert("Pengembalian aset berhasil dikonfirmasi");
    closeReturnModal(); // Tutup modal setelah konfirmasi
}
</script>



