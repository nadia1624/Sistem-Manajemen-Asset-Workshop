<!DOCTYPE html>
<html lang="en" data-preline>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SIMAW</title>
  <link rel="stylesheet" href="/styles.css">
  <link rel="stylesheet" href="/css/template.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
  <script src="https://cdn.lordicon.com/lordicon.js"></script>
  <style>
    /* Add only the new active state styles */
    .sidebar .nav-link.active {
      background-color: white !important;
      color: black !important;
    }
    
    .sidebar .nav-link.active lord-icon {
      --lord-icon-primary: #000000 !important;
      --lord-icon-secondary: #000000 !important;
    }
  </style>
</head>
<body style="padding: 36px; background-color: #f7f7f5;">

<!-- Toggle Button untuk Mobile -->
<button class="menu-toggle">
  <i class="fas fa-bars"></i>
</button>

<!-- Overlay untuk Mobile -->
<div class="sidebar-overlay"></div>

<div class="sidebar flex justify-center">
<!-- Sidebar -->
<div id="hs-sidebar-basic-usage" class="hs-overlay [--auto-close:lg] lg:block lg:translate-x-0 lg:end-auto lg:bottom-0 w-64
hs-overlay-open:translate-x-0
-translate-x-full transition-all duration-300 transform
fixed  start-0 bottom-0 z-[60]
bg-[#B60017] border-e border-gray-200 dark:bg-neutral-00 dark:border-neutral-700 rounded-lg" role="dialog" tabindex="-1" aria-label="Sidebar" style="margin: 8px; margin-bottom: 8px;">
  <div class="relative flex flex-col h-full max-h-full">
      <!-- Header -->
      <header class="p-4 flex flex-col items-center justify-center">
        <!-- Logo -->
        <img src="/image/logo.png" alt="Website Logo" style="width:75px;height:75px">
        <!-- Nama Web -->
        <h1 class="text-white text-xl font-semibold dark:text-white">SIMAW</h1>
      </header>

      <!-- Body -->
      <nav class="h-full overflow-y-auto [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-700 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500">
        <div class="pb-0 px-2 w-full flex flex-col flex-wrap">
          <ul class="space-y-1">
            <!-- Sidebar list items -->
            <li>
              <a class="nav-link flex items-center gap-x-3 py-2 px-2.5 text-sm text-white rounded-lg
                       hover:bg-white hover:text-black focus:bg-white focus:text-black
                       dark:text-white dark:hover:text-black dark:hover:bg-white"
                 href="/admin/dashboard"
                 onmouseover="this.querySelector('lord-icon').setAttribute('colors', 'primary:#000000')"
                 onmouseout="handleMouseOut(this)"
                 data-page="dashboard">
                <lord-icon
                  src="https://cdn.lordicon.com/cnpvyndp.json"
                  trigger="hover"
                  colors="primary:#ffffff"
                  style="width:24px;height:24px">
                </lord-icon>
                Dashboard
              </a>
            </li>
            <li>
              <a class="nav-link flex items-center gap-x-3 py-2 px-2.5 text-sm text-white rounded-lg
                       hover:bg-white hover:text-black focus:bg-white focus:text-black
                       dark:text-white dark:hover:text-black dark:hover:bg-white"
                 href="/admin/pengelolaan-aset"
                 onmouseover="this.querySelector('lord-icon').setAttribute('colors', 'primary:#000000')"
                 onmouseout="handleMouseOut(this)"
                 data-page="pengelolaan-aset">
                <lord-icon
                  src="https://cdn.lordicon.com/zyzoecaw.json"
                  trigger="morph"
                  state="morph-book"
                  colors="primary:#ffffff"
                  style="width:24px;height:24px">
                </lord-icon>
                Pengelolaan Aset
              </a>
            </li>
           
            <li>
              <a class="nav-link flex items-center gap-x-3 py-2 px-2.5 text-sm text-white rounded-lg
                       hover:bg-white hover:text-black focus:bg-white focus:text-black
                       dark:text-white dark:hover:text-black dark:hover:bg-white"
                 href="/admin/permintaanAset"
                 onmouseover="this.querySelector('lord-icon').setAttribute('colors', 'primary:#000000')"
                 onmouseout="handleMouseOut(this)"
                 data-page="permintaanAset">
                <lord-icon
                  src="https://cdn.lordicon.com/xtnsvhie.json"
                  trigger="hover"
                  colors="primary:#ffffff"
                  style="width:24px;height:24px">
                </lord-icon>
                Permintaan Aset
              </a>
            </li>
           
            <li>
              <a class="nav-link flex items-center gap-x-3 py-2 px-2.5 text-sm text-white rounded-lg
                       hover:bg-white hover:text-black focus:bg-white focus:text-black
                       dark:text-white dark:hover:text-black dark:hover:bg-white"
                 href="/admin/penyerahanAset"
                 onmouseover="this.querySelector('lord-icon').setAttribute('colors', 'primary:#000000')"
                 onmouseout="handleMouseOut(this)"
                 data-page="penyerahanAset">
                <lord-icon
                  src="https://cdn.lordicon.com/vdjwmfqs.json"
                  trigger="hover"
                  colors="primary:#ffffff"
                  style="width:24px;height:24px">
                </lord-icon>
                Penyerahaan Aset
              </a>
            </li>
           
            <li>
              <a class="nav-link flex items-center gap-x-3 py-2 px-2.5 text-sm text-white rounded-lg
                       hover:bg-white hover:text-black focus:bg-white focus:text-black
                       dark:text-white dark:hover:text-black dark:hover:bg-white"
                 href="/admin/pengembalianAset"
                 onmouseover="this.querySelector('lord-icon').setAttribute('colors', 'primary:#000000')"
                 onmouseout="handleMouseOut(this)"
                 data-page="pengembalianAset">
                <lord-icon
                  src="https://cdn.lordicon.com/oqdmuxru.json"
                  trigger="hover"
                  colors="primary:#ffffff"
                  style="width:24px;height:24px">
                </lord-icon>
                Pengembalian Aset
              </a>
            </li>
           
            <li>
              <a class="nav-link flex items-center gap-x-3 py-2 px-2.5 text-sm text-white rounded-lg
                       hover:bg-white hover:text-black focus:bg-white focus:text-black
                       dark:text-white dark:hover:text-black dark:hover:bg-white"
                 href="/admin/daftarPengajuanCek"
                 onmouseover="this.querySelector('lord-icon').setAttribute('colors', 'primary:#000000,secondary:#000000')"
                 onmouseout="handleMouseOut(this)"
                 data-page="daftarPengajuanCek">
                <lord-icon
                  src="https://cdn.lordicon.com/fwkrbvja.json"
                  trigger="hover"
                  stroke="bold"
                  colors="primary:#ffffff,secondary:#ffffff"
                  style="width:25px;height:25px">
                </lord-icon>
                Pengajuan Cek
              </a>
            </li>
           
            <li>
              <a class="nav-link flex items-center gap-x-3 py-2 px-2.5 text-sm text-white rounded-lg
                       hover:bg-white hover:text-black focus:bg-white focus:text-black
                       dark:hover:text-black dark:hover:bg-white"
                 href="/admin/asetKaryawan"
                 onmouseover="this.querySelector('lord-icon').setAttribute('colors', 'primary:#000000')"
                 onmouseout="handleMouseOut(this)"
                 data-page="asetKaryawan">
                <lord-icon
                  src="https://cdn.lordicon.com/rsbokaso.json"
                  trigger="hover"
                  colors="primary:#ffffff"
                  style="width:24px;height:24px">
                </lord-icon>
                Pengembalian Vendor
              </a>
            </li>
           
            <li class="mb-10">
              <a class="nav-link flex items-center gap-x-3 py-2 px-2.5 text-sm text-white rounded-lg
                       hover:bg-white hover:text-black focus:bg-white focus:text-black
                       dark:hover:text-black dark:hover:bg-white"
                 href="/admin/pemeliharaan-aset"
                 onmouseover="this.querySelector('lord-icon').setAttribute('colors', 'primary:#000000')"
                 onmouseout="handleMouseOut(this)"
                 data-page="pemeliharaan-aset">
                <lord-icon
                  src="https://cdn.lordicon.com/abfverha.json"
                  trigger="hover"
                  colors="primary:#ffffff"
                  style="width:24px;height:24px">
                </lord-icon>
                Pemeliharaan Aset
              </a>
            </li>
           
            <li class="mb-10">
              <!-- Form Tersembunyi -->
              <form id="logoutForm" action="/logout" method="POST" style="display:none;">
              </form>
            
              <!-- Link Logout -->
              <a class="nav-link flex items-center gap-x-3 py-2 px-2.5 text-sm text-white rounded-lg
                       hover:bg-white hover:text-black focus:bg-white focus:text-black
                       dark:hover:text-black dark:hover:bg-white"
                 href="#"
                 onclick="confirmLogout(event);"
                 onmouseover="this.querySelector('lord-icon').setAttribute('colors', 'primary:#000000,secondary:#000000')"
                 onmouseout="handleMouseOut(this)">
                <lord-icon
                  src="https://cdn.lordicon.com/gwvmctbb.json"
                  trigger="hover"
                  stroke="bold"
                  colors="primary:#ffffff,secondary:#ffffff"
                  style="width:24px;height:24px">
                </lord-icon>
                Keluar
              </a>
            </li>
          </ul>
        </div>
      </nav>
  </div>
</div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.querySelector('.menu-toggle');
    const sidebar = document.querySelector('.sidebar');
    const overlay = document.querySelector('.sidebar-overlay');
    const navLinks = document.querySelectorAll('.nav-link');
    
    // Get current page path dan set active state
    const currentPath = window.location.pathname;
    navLinks.forEach(link => {
        if (link.getAttribute('href') === currentPath) {
            link.classList.add('active');
            const lordIcon = link.querySelector('lord-icon');
            if (lordIcon) {
                lordIcon.setAttribute('colors', 'primary:#000000,secondary:#000000');
            }
        }
    });

    // Perbaiki toggle functionality
    if (menuToggle) {
        menuToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
            this.classList.toggle('active');
        });
    }

    // Perbaiki overlay click
    if (overlay) {
        overlay.addEventListener('click', function() {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
            menuToggle.classList.remove('active');
        });
    }

    // Pastikan link tetap berfungsi di mobile dengan active state
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.stopPropagation();
            
            // Hapus active class dari semua link
            navLinks.forEach(l => {
                l.classList.remove('active');
                const icon = l.querySelector('lord-icon');
                if (icon) {
                    if (l.getAttribute('href') === '/admin/daftarPengajuanCek') {
                        icon.setAttribute('colors', 'primary:#ffffff,secondary:#ffffff');
                    } else {
                        icon.setAttribute('colors', 'primary:#ffffff');
                    }
                }
            });
            
            // Tambah active class ke link yang diklik
            this.classList.add('active');
            const lordIcon = this.querySelector('lord-icon');
            if (lordIcon) {
                lordIcon.setAttribute('colors', 'primary:#000000,secondary:#000000');
            }
            
            // Jika di mobile view, tutup sidebar setelah link diklik
            if (window.innerWidth <= 768) {
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
                menuToggle.classList.remove('active');
            }
        });
    });
});

// Handle mouse out for icons
function handleMouseOut(element) {
    if (!element.classList.contains('active')) {
        const lordIcon = element.querySelector('lord-icon');
        if (lordIcon) {
            if (element.getAttribute('href') === '/admin/daftarPengajuanCek') {
                lordIcon.setAttribute('colors', 'primary:#ffffff,secondary:#ffffff');
            } else {
                lordIcon.setAttribute('colors', 'primary:#ffffff');
            }
        }
    }
}

function confirmLogout(event) {
    const userConfirmed = confirm("Apakah Anda yakin ingin keluar?");
    
    if (userConfirmed) {
        document.getElementById('logoutForm').submit();
    } else {
        event.preventDefault();
    }
}
</script>
</body>
</html>